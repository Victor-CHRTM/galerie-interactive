import{u as c}from"./B6F26li4.js";const f=()=>{const{$supabase:a}=c();return{fetchImages:async()=>{try{const{data:r,error:e}=await a.from("images").select("*").order("position",{ascending:!0});return e?(console.error("Erreur fetchImages:",e),[]):r??[]}catch(r){return console.error("Exception fetchImages:",r),[]}},createImage:async r=>{try{const{data:e,error:t}=await a.from("images").insert([r]).select().single();return t?(console.error("Erreur createImage:",t),null):e}catch(e){return console.error("Exception createImage:",e),null}},updateImage:async(r,e)=>{try{const{data:t,error:o}=await a.from("images").update(e).eq("id",r).select().single();return o?(console.error("Erreur updateImage:",o),null):t}catch(t){return console.error("Exception updateImage:",t),null}},deleteImage:async r=>{try{const{error:e}=await a.from("images").delete().eq("id",r);return e?(console.error("Erreur deleteImage:",e),!1):!0}catch(e){return console.error("Exception deleteImage:",e),!1}},uploadImage:async r=>{try{const e=Date.now(),t=r.name.replace(/[^a-zA-Z0-9.-]/g,"_"),o=`${e}-${t}`,{error:n}=await a.storage.from("gallery-images").upload(o,r,{cacheControl:"3600",upsert:!1});if(n)return console.error("Erreur uploadImage:",n),null;const{data:s}=a.storage.from("gallery-images").getPublicUrl(o);return s.publicUrl}catch(e){return console.error("Exception uploadImage:",e),null}},deleteImageFromStorage:async r=>{try{const e=r.split("/").pop();if(!e)return!1;const{error:t}=await a.storage.from("gallery-images").remove([e]);return t?(console.error("Erreur deleteImageFromStorage:",t),!1):!0}catch(e){return console.error("Exception deleteImageFromStorage:",e),!1}}}};export{f as u};
